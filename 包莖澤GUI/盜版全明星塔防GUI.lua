--盜版全明星塔防GUI
local library = loadstring(game:HttpGet(("https://raw.githubusercontent.com/kakuun333/Exploit_Scripts/main/%E5%8C%85%E8%8E%96%E6%BE%A4GUI/GUI-Library/%E5%8C%85%E8%8E%96%E6%BE%A4GUI-Library.lua")))()

local client_to_server = game:GetService("ReplicatedStorage").endpoints["client_to_server"]
local players = game:GetService("Players")
local localplayer = players.LocalPlayer

getgenv().votestart = false
getgenv().autoupgrade = false
getgenv().backtolobby = false
getgenv().ClaimQuest = false

local Main = library:MainFrame("盜版全明星塔防GUI")

local Auto = Main:Tab("自動")

Auto:Toggle("自動投票開始",function(bool)
    getgenv().votestart = bool
    if bool then
        votestart()
    end
end)

Auto:Toggle("自動回大廳",function(bool)
    getgenv().backtolobby = bool
    if bool then
        backtolobby()
    end
end)

Auto:Toggle("自動升級角色",function(bool)
    getgenv().autoupgrade = bool
    if bool then
        autoupgrade()
    end
end)

Auto:Toggle("自動領取任務獎勵",function(bool)
    getgenv().ClaimQuest = bool
    if bool then
        ClaimQuest()
    end
end)

Auto:Button("自動兌換代碼",function()
    code()
end)

function votestart()
    while getgenv().votestart do
        if game:GetService("Workspace")["_DATA"].VoteStart.VotingFinished.Value == false then
            client_to_server["vote_start"]:InvokeServer()
        end
        wait()
    end
end

function autoupgrade()
    while getgenv().autoupgrade do
        for i,v in next, game:GetService("Workspace")["_UNITS"]:GetDescendants() do
            if v:IsA("ObjectValue") and v.Name == "player" then
                if v.Value == localplayer then
                    local unit = v.Parent.Parent
                    local Target = client_to_server["upgrade_unit_ingame"];
                    Target:InvokeServer(unit)
                end
            end
        end
        for i,v in next, localplayer.PlayerGui.MessageGui.messages:GetChildren() do
            if v:IsA("Frame") and  v.Name == "Error" and v.Tex.Text == "Not enough money!" then
                v:Destroy()
            end
        end
        wait()
    end
end

function backtolobby()
    while _G.backtolobby do
        if localplayer.PlayerGui.ResultsUI.Enabled == true then
            client_to_server["teleport_back_to_lobby"]:InvokeServer()
        end
        wait()
    end
end


function ClaimQuest()
    local questcontent = localplayer.PlayerGui.QuestsUI.Main.Main.Main.Content

    local function claim(v)
        local questname = v.Name
        client_to_server["redeem_quest"]:InvokeServer(questname)
    end

    while getgenv().ClaimQuest do
        for i,v in next, questcontent.event.Scroll:GetChildren() do
            if v:IsA("Frame") then
                claim(v)
            end
        end
    
        for i,v in next, questcontent.daily.Scroll:GetChildren() do
            if v:IsA("Frame") then
                claim(v)
            end
        end
    
        for i,v in next, questcontent.story.Scroll:GetChildren() do
            if v:IsA("Frame") then
                claim(v)
            end
        end
        client_to_server["claim_daily_reward"]:InvokeServer()--領每日獎勵
        wait(5)
    end
end

function code()
    local codes = {
    "GHOUL",
    "FIRSTRAIDS",
    "DATAFIX",
    "MARINEFORD",
    "TWOMILLION",
    "subtomaokuma",
    "SORRYFORSHUTDOWN",
    "TWOMILLION",
    "CHALLENGEFIXin",
    "GINYUFIX",
    "RELEASE",
    "SubToKelvingts",
    "SubToBlamspot",
    "KingLuffy",
    "TOADBOIGAMING",
    "noclypso",
    "FictioNTheFirst",
    "Cursed",
	"MUGENTRAIN",
    }
    print("------------")
    for count = 1,#codes do
        print(count)
        print(codes[count])
        local arg = codes[count]
        local Target = client_to_server["redeem_code"]
        Target:InvokeServer(arg)
    end
end

local Tab2 = Main:Tab("222")
