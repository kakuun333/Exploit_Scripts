--盜版全明星塔防GUI
local library = loadstring(game:HttpGet(("https://pastebin.com/raw/2cj59R7b")))()

local client_to_server = game:GetService("ReplicatedStorage").endpoints["client_to_server"]
local players = game:GetService("Players")
local localplayer = players.LocalPlayer

_G.votestart = false
_G.autoupgrade = false
_G.backtolobby = false

local Main = library:CreateMainFrame("盜版全明星塔防GUI")

local Auto = Main:Tab("自動")

Auto:Toggle("自動投票開始",function(bool)
    _G.votestart = bool
    if bool then
        votestart()
    end
end)

Auto:Toggle("自動升級角色",function(bool)
    _G.autoupgrade = bool
    if bool then
        autoupgrade()
    end
end)

Auto:Toggle("自動回大廳",function(bool)
    _G.backtolobby = bool
    if bool then
        backtolobby()
    end
end)

function votestart()
    while _G.votestart do
        if game:GetService("Workspace")["_DATA"].VoteStart.VotingFinished.Value == false then
            client_to_server["vote_start"]:InvokeServer()
        end
        wait()
    end
end

function autoupgrade()
    while _G.autoupgrade do
        for i,v in next, game:GetService("Workspace")["_UNITS"]:GetDescendants() do
            if v:IsA("ObjectValue") and v.Name == "player" then
                if v.Value == localplayer then
                    local unit = v.Parent.Parent
                    local Target = client_to_server["upgrade_unit_ingame"];
                    Target:InvokeServer(unit)
                end
            end
        end
        for i,v in next, localplayer.PlayerGui.MessageGui.messages:GetChildren() do
            if v:IsA("Frame") and  v.Name == "Error" and v.Tex.Text == "Not enough money!" then
                v:Destroy()
            end
        end
        wait()
    end
end

function backtolobby()
    while _G.backtolobby do
        if localplayer.PlayerGui.ResultsUI.Enabled == true then
            client_to_server["teleport_back_to_lobby"]:InvokeServer()
        end
        wait()
    end
end
